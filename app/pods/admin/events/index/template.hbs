<Admin::Components::BackLink @route="admin.index" @text="Admin" />

<Admin::Components::Title @title="Events" />

<div class="mt-8 flex items-center justify-between">
  <div>
    <Button @href={{href-to "admin.events.new"}} @icon="plus" @size="medium" @variant="plain">
      New
    </Button>
  </div>

  <div>
    <label>
      <RadioButton
        @value="upcoming"
        @groupValue={{this.range}}
        @changed={{this.rangeUpdated}}
      />
      <span class="leading-none">Upcoming</span>
    </label>
    <label class="ml-4">
      <RadioButton
        @value="past"
        @groupValue={{this.range}}
        @changed={{this.rangeUpdated}}
      />
      <span class="leading-none">Past</span>
    </label>
    <label class="ml-4">
      <RadioButton
        @value="all"
        @groupValue={{this.range}}
        @changed={{this.rangeUpdated}}
      />
      <span class="leading-none">All</span>
    </label>
  </div>
</div>

{{#if (gt this.model.length 0)}}
  <EventList
    @events={{this.model}}
    @isAdmin={{true}}
    @onDelete={{fn (mut this.eventToDelete)}}
  />
{{else}}
  <p class="mt-12 text-lg text-gray-700 sm:text-xl">No events found</p>
{{/if}}

<Admin::Components::UiPagination
  @page={{this.page}}
  @totalPages={{this.pageMeta.total}}
  @totalResults={{this.pageMeta.totalResults}}
  @onPageChange={{this.pageChanged}}
/>

{{#if this.eventToDelete}}
  <Admin::Events::Components::DeleteEventForm
    @event={{this.eventToDelete}}
    @onSave={{fn (mut this.eventToDelete) null}}
    @onCancel={{fn (mut this.eventToDelete) null}}
  />
{{/if}}

{{outlet}}
